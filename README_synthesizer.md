# Python Synthesizer

Python-версия синтезатора мелодии для локальной настройки параметров. Основан на STM32F4 проекте с поддержкой ADSR огибающей, полифонии и барабанных звуков.

## Возможности

- **Полифонический синтезатор** с поддержкой до 8 голосов
- **ADSR огибающая** для реалистичного звучания
- **Барабанные звуки** с различными пресетами
- **Секвенсор** для создания ритмических паттернов
- **GUI интерфейс** для удобной настройки
- **MIDI поддержка** для работы с нотами

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Запустите синтезатор:

### Консольная версия:
```bash
python python_synthesizer.py
```

### GUI версия:
```bash
python synthesizer_gui.py
```

## Использование

### Консольная версия

Доступные команды:
- `play` - запустить секвенсор
- `stop` - остановить секвенсор
- `drum <type>` - воспроизвести барабан (kick, snare, hihat, crash, ride, tom_high, tom_mid, tom_low)
- `note <channel> <note>` - воспроизвести MIDI ноту
- `bpm <value>` - установить темп (60-240)
- `volume <value>` - установить громкость (0.0-1.0)
- `quit` - выход

### GUI версия

Интерфейс разделен на вкладки:

#### Синтезатор
- Настройка мастер-громкости
- ADSR параметры (Attack, Decay, Sustain, Release)
- Применение настроек

#### Барабаны
- Кнопки для воспроизведения различных барабанов
- Настройка громкости барабанов

#### Секвенсор
- Управление воспроизведением (играть/пауза/стоп)
- Настройка темпа (BPM)
- Создание ритмических паттернов (16 шагов)
- Предустановленные паттерны

#### Настройки
- Громкость каналов (0-8)
- Эффекты (Reverb, Chorus)
- Сброс настроек

## Технические детали

### ADSR Огибающая
- **Attack** - время нарастания звука (0.001-2.0 сек)
- **Decay** - время спада до уровня сустейна (0.001-2.0 сек)
- **Sustain** - уровень поддержания звука (0.0-1.0)
- **Release** - время затухания после отпускания (0.001-2.0 сек)

### Барабанные звуки
- **Kick** - бас-барабан (60 Гц)
- **Snare** - малый барабан (200 Гц, шум)
- **Hi-hat** - хай-хэт (8000 Гц, шум)
- **Crash** - крэш (5000 Гц, шум)
- **Ride** - райд (3000 Гц, шум)
- **Tom** - томы (100-400 Гц)

### MIDI ноты
- C4 = 60 (440 Гц)
- C5 = 72 (880 Гц)
- C6 = 84 (1760 Гц)

## Примеры использования

### Создание простой мелодии
```python
from python_synthesizer import Synthesizer

synth = Synthesizer()

# Воспроизведение нот
synth.note_on(0, 60, 0.8)  # C4
time.sleep(0.5)
synth.note_off(0, 60)

synth.note_on(0, 64, 0.8)  # E4
time.sleep(0.5)
synth.note_off(0, 64)
```

### Настройка ADSR
```python
from python_synthesizer import ADSR

# Создание ADSR огибающей
adsr = ADSR(attack=0.1, decay=0.2, sustain=0.7, release=0.5)
synth.set_adsr(0, adsr)
```

### Воспроизведение барабанов
```python
from python_synthesizer import DrumPreset

# Воспроизведение различных барабанов
synth.play_drum(DrumPreset.KICK, 0.8)
synth.play_drum(DrumPreset.SNARE, 0.6)
synth.play_drum(DrumPreset.HIHAT, 0.4)
```

## Настройка параметров

### Оптимизация для различных стилей музыки

**Электронная музыка:**
- Attack: 0.01-0.05
- Decay: 0.1-0.3
- Sustain: 0.8-1.0
- Release: 0.1-0.5

**Акустические инструменты:**
- Attack: 0.05-0.2
- Decay: 0.2-0.5
- Sustain: 0.3-0.7
- Release: 0.3-1.0

**Барабаны:**
- Kick: низкая частота, длинный release
- Snare: средняя частота, короткий attack
- Hi-hat: высокая частота, короткий duration

## Устранение неполадок

### Проблема: Мелодии и ноты не воспроизводятся

**Быстрое решение:**
```bash
# 1. Установите зависимости
pip install numpy pygame

# 2. Запустите быстрый тест
python quick_test.py

# 3. Если тест прошел, запустите демо
python demo_synthesizer.py
```

**Подробная диагностика:**
1. Проверьте, что pygame работает: `python test_sound.py`
2. Убедитесь, что звуковая карта включена
3. Проверьте громкость системы
4. См. файл `TROUBLESHOOTING.md` для детальной диагностики

### Проблемы со звуком
1. Проверьте, что pygame установлен корректно
2. Убедитесь, что звуковая карта работает
3. Проверьте громкость системы
4. Попробуйте переустановить pygame: `pip uninstall pygame && pip install pygame`

### Проблемы с производительностью
1. Уменьшите количество активных голосов
2. Снизьте частоту дискретизации
3. Оптимизируйте ADSR параметры

### Проблемы с GUI
1. Убедитесь, что tkinter установлен
2. Проверьте версию Python (требуется 3.7+)
3. Перезапустите приложение

## Разработка

### Добавление новых барабанных звуков
```python
# В классе Synthesizer
self.drum_presets[DrumPreset.NEW_DRUM] = DrumSound(
    frequency=500, 
    duration=0.1, 
    volume=0.8, 
    is_noise=False
)
```

### Создание новых эффектов
```python
def apply_effect(self, samples, effect_type, level):
    if effect_type == "reverb":
        # Реализация реверберации
        pass
    elif effect_type == "chorus":
        # Реализация хоруса
        pass
```

## Лицензия

Этот проект создан для образовательных целей и основан на STM32F4 проекте.
